<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <title>
    <%= title %>
  </title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    body {
      background: #000;
      color: #fff;
      font-family: "Poppins", sans-serif;
    }

    .form-container {
      max-width: 600px;
      margin: 60px auto;
      background: #111;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(196, 30, 58, 0.4);
    }

    h1 {
      text-align: center;
      color: #c41e3a;
      margin-bottom: 30px;
    }

    form label {
      display: block;
      margin-top: 15px;
      color: #ccc;
    }

    form input,
    form select,
    form textarea {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #333;
      border-radius: 5px;
      background: #222;
      color: #fff;
    }

    form input[type="file"] {
      border: none;
      padding: 5px 0;
    }

    .preview {
      margin-top: 15px;
      text-align: center;
    }

    .preview img {
      max-width: 100%;
      border-radius: 6px;
    }

    /* --- Nút hành động --- */
    .form-actions {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      align-items: center;
      gap: 20px;
      margin-top: 30px;
    }

    .btn-action {
      padding: 10px 24px;
      border-radius: 6px;
      border: none;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      color: #fff;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: 0.3s;
    }

    .form-actions {
  display: grid;
  grid-template-columns: 1fr 1fr; /* chia đều 2 cột */
  gap: 20px;
  margin-top: 20px;
}

.btn-action {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  width: 100%;          /* mỗi nút chiếm trọn cột */
  text-align: center;
  padding: 14px 0;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 16px;
  font-weight: 500;
  transition: 0.3s;
  text-decoration: none;
  color: #fff;
}
    .btn:hover { background: #a0142e; }

    .btn-save {
      background: #c41e3a;
      grid-column: span 2;
      height: 43px;
    }

    .btn-save:hover {
      background: #a0142e;
    }

    .btn-back {
      background: #333;
      grid-column: span 2;
    }

    .btn-back:hover {
      background: #555;
    }
  </style>
</head>

<body>
  <%- include('../partials/admindashboard') %>

    <div class="form-container">
      <h1>
        <%= title %>
      </h1>
      <form action="<%= perfume ? '/perfumes/edit/' + perfume._id : '/perfumes/add' %>" method="POST"
        enctype="multipart/form-data">
        <label>Name</label> 
        <input type="text" name="name" value="<%= perfume ? perfume.name : '' %>" required />

        <% if (!perfume) { %>
          <label>Brand</label>
          <select name="brand" required>
            <option value="">-- Chọn thương hiệu --</option>
            <% (brands || []).forEach(function(b){ %>
              <option value="<%= b.name %>"><%= b.name %></option>
            <% }) %>
          </select>
        <% } else { %>
          <!-- Ẩn brand khi edit -->
          <input type="hidden" name="brand" value="<%= perfume.brand %>" />
        <% } %>


        <label>Price (VND)</label>
        <input type="number" name="price" value="<%= perfume ? perfume.price : '' %>" required />

        <label>Description</label>
        <textarea name="description" rows="4"><%= perfume ? perfume.description : '' %></textarea>

        <label>Gender</label>
        <select name="gender">
          <option value="Unisex" <%=perfume && perfume.gender==='Unisex' ? 'selected' : '' %>>Unisex</option>
          <option value="Nam" <%=perfume && perfume.gender==='Nam' ? 'selected' : '' %>>Nam</option>
          <option value="Nữ" <%=perfume && perfume.gender==='Nữ' ? 'selected' : '' %>>Nữ</option>
        </select>

        <label>Image</label>
        <input type="file" name="image" accept="image/*" />

        <% if (perfume && perfume.image) { %>
          <div class="preview">
            <p>Current image:</p>
            <img src="<%= perfume.image %>" alt="<%= perfume.name %>" />
          </div>
          <% } %>

            <div class="form-actions">
              <button type="submit" class="btn-action btn-save">
                <i class="fa-solid fa-floppy-disk"></i> Save
              </button>
              <a href="/perfumes" class="btn-action btn-back">
                <i class="fa-solid fa-arrow-left"></i> Back
              </a>
            </div>
      </form>
    </div>

    <%- include('../partials/footer') %>
</body>

</html>