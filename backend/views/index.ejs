<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/style.css" />
  <style>
    body {
      background-color: #0c0c0c;
      color: #fff;
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 90%;
      max-width: 1200px;
      margin: 40px auto;
    }

    h1 {
      text-align: center;
      font-weight: 600;
      letter-spacing: 1px;
    }

    /* --- Banner --- */
    .hero {
      background: url("https://img.freepik.com/premium-photo/perfume-bottle-water-with-red-smoke-backdrop-3d-mockup_1168123-1891.jpg?semt=ais_hybrid&w=740&q=80") center/cover no-repeat;
      height: 450px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      color: white;
    }

    .hero h1 {
      font-size: 48px;
      margin-bottom: 10px;
      color: #fff;
    }

    .hero p {
      font-size: 18px;
      color: #ccc;
      max-width: 600px;
    }

    /* --- Gi·ªõi thi·ªáu --- */
    .intro {
      text-align: center;
      padding: 50px 20px;
      max-width: 900px;
      margin: 0 auto;
      color: #ccc;
      line-height: 1.8;
    }

    /* --- Perfume Grid --- */
    .perfume-grid {
      margin-top: 40px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 30px;
      justify-items: center;
    }

    .perfume-card {
      position: relative;
      background: #151515;
      border: 1px solid #222;
      border-radius: 10px;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      height: 550px;
      width: 100%;
    }

    .perfume-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 10px rgba(255, 0, 50, 0.3);
    }

    .perfume-card img {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-bottom: 1px solid #222;
    }

    .perfume-card h3 {
      margin: 12px 15px 0;
      color: #fff;
      font-weight: 600;
    }

    .perfume-card p {
      margin: 6px 15px;
      color: #aaa;
      font-size: 14px;
    }


    .perfume-tag {
  position: absolute;
  top: 10px;
  right: 10px;
  background: linear-gradient(135deg, #c41e3a, #ff4d6d);
  color: #fff;
  font-weight: 600;
  font-size: 13px;
  padding: 6px 10px;
  border-radius: 8px;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
  z-index: 2;
}

    .perfume-price {
      color: #c41e3a;
      font-weight: 600;
      margin: 10px 15px;
    }

    .btn {
      display: inline-block;
      padding: 10px 18px;
      background: #c41e3a;
      color: #fff;
      text-decoration: none;
      border-radius: 6px;
      transition: 0.3s;
      font-weight: 500;
      text-align: center;
    }

    .btn:hover {
      background: #a0142e;
    }

    .center-btn {
      display: flex;
      justify-content: center;
      margin-top: 30px;
    }

    /* ===== SEARCH & FILTER ===== */
    .search-filter-form {
      width: 90%;
      max-width: 900px;
      margin: 50px auto;
    }

    .search-row {
      display: grid;
      grid-template-columns: 7fr 0.3fr;
      gap: 10px;
    }

    .search-input {
      padding: 12px 16px;
      border-radius: 8px;
      border: 1px solid #333;
      background: #111;
      color: #fff;
      font-size: 15px;
      outline: none;
      width: 100%;
    }

    .filter-btn {
      border: none;
      border-radius: 8px;
      background: #c41e3a;
      color: #fff;
      font-size: 18px;
      width: 42px;
      height: 42px;
      cursor: pointer;
    }

    .filter-btn:hover {
      background: #a0142e;
    }

    .filter-panel {
      display: none;
      margin-top: 15px;
      padding: 15px;
      background: #151515;
      border: 1px solid #333;
      border-radius: 10px;
      width: 100%;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    }

    .filter-panel select {
      width: 100%;
      background: #111;
      color: #fff;
      border: 1px solid #333;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .apply-filter {
      width: 100%;
      background: #c41e3a;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
      transition: 0.3s;
    }

    .apply-filter:hover {
      background: #a0142e;
    }

    /* Th∆∞∆°ng hi·ªáu n·ªïi b·∫≠t*/
    .brands {
      text-align: center;
      padding: 60px 0;
    }

    .brands h2 {
      margin-bottom: 30px;
      font-size: 26px;
    }

    .brand-logos {
      display: flex;
      justify-content: center;
      gap: 50px;
      flex-wrap: wrap;
    }

    .brand-logos img {
      width: 100px;
      opacity: 0.8;
      transition: 0.3s;
    }

    .brand-logos img:hover {
      opacity: 1;
      transform: scale(1.1);
    }

    /* --- B·ªô s∆∞u t·∫≠p n·ªïi b·∫≠t --- */
    .featured {
      padding: 60px 0;
      text-align: center;
    }

    .featured-grid {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
    }

    .featured-card {
      width: 250px;
      background: #151515;
      border: 1px solid #222;
      border-radius: 10px;
      overflow: hidden;
      transition: 0.3s;
    }

    .featured-card img {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .featured-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 4px 10px rgba(255, 0, 50, 0.3);
    }

    /* --- Responsive --- */
    @media (max-width: 1200px) {
      .perfume-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 900px) {
      .perfume-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 600px) {
      .perfume-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <%- include('partials/header') %>

  <!-- Banner -->
  <div class="hero">
    <h1>Perfume <span style="color:#0e0707;">House</span></h1>
    <p>Where the most exquisite fragrances converge, honoring your unique style.</p>
  </div>

  <!--Gi·ªõi thi·ªáu -->
  <div class="intro">
    <p>
      Welcome to Perfume House ‚Äì the world of the most exquisite fragrances.
      Here, we bring you the finest fragrances from renowned brands like Chanel, Dior, Gucci, YSL and more.
      Find the fragrance that suits your personality.
    </p>
  </div>

  <!--Th∆∞∆°ng hi·ªáu n·ªïi b·∫≠t -->
  <section class="brands">
    <h2>Featured Brands</h2>
    <div class="brand-logos">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRsHqPoodzyGI9VGHqBDbc-kQx5M2aMSc1_LQ&s" alt="Dior">
      <img src="https://cdn.shopify.com/s/files/1/0775/7363/files/chanel-iconic-cc-logo_480x480.jpg?v=1627421098" alt="Chanel">
      <img src="https://cdn.logojoy.com/wp-content/uploads/20240306150540/1992-Gucci-logo-600x319.png" alt="Gucci">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTqOSPxMi98o62tSGPkckluvbYfO_XHOLNwuA&s" alt="YSL">
    </div>
  </section>
  

  <!-- üîπ B·ªô s∆∞u t·∫≠p n·ªïi b·∫≠t -->
  <section class="featured">
    <h2>Featured Collection</h2>
    <div class="featured-grid">
      <% perfumes.slice(0, 4).forEach(p => { %>
        <div class="featured-card">
          <img src="<%= p.image %>" alt="<%= (p.perfumeName || p.name) %>">
          <h3><%= (p.perfumeName || p.name) %></h3>
          <p><%= p.price.toLocaleString() %> VND</p>
        </div>
      <% }) %>
    </div>
  </section>

  <!-- üîç SEARCH + FILTER -->
  <form action="/" method="GET" class="search-filter-form">
    <div class="search-row">
      <input type="text" name="search" placeholder="Search by perfume name..." value="<%= search || '' %>" class="search-input" />
      <button type="button" class="filter-btn" onclick="toggleFilter()">‚öôÔ∏è</button>
    </div>

    <div class="filter-panel" id="filter-panel">
      <select name="brand">
        <option value="">All brands</option>
        <% brands.forEach(b=> { %>
          <option value="<%= b %>" <%=brand===b ? 'selected' : '' %>><%= b %></option>
        <% }) %>
      </select>

      <select name="gender">
        <option value="">All</option>
        <option value="Nam" <%=gender==='Nam' ? 'selected' : '' %>>Male</option>
        <option value="N·ªØ" <%=gender==='N·ªØ' ? 'selected' : '' %>>Female</option>
        <option value="Unisex" <%=gender==='Unisex' ? 'selected' : '' %>>Unisex</option>
      </select>

      <select name="sort">
        <option value="">Sort</option>
        <option value="asc" <%=sort==='asc' ? 'selected' : '' %>>Price ascending</option>
        <option value="desc" <%=sort==='desc' ? 'selected' : '' %>>Price descending</option>
      </select>

      <button type="submit" class="apply-filter">Apply</button>
    </div>
  </form>

  <script>
    function toggleFilter() {
      const panel = document.getElementById('filter-panel');
      panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
    }
  </script>

  <!-- üîπ Danh s√°ch s·∫£n ph·∫©m -->
  <div class="container">
    <% if (!perfumes.length) { %>
      <p style="text-align:center;">No perfumes available!</p>
    <% } else { %>
      <div class="perfume-grid">
        <% perfumes.forEach(perfume => { %>
          <div class="perfume-card">
            
            <!-- üî• Tag Extrait -->
            <% if (perfume.concentration && perfume.concentration.toLowerCase() === 'extrait') { %>
              <div class="perfume-tag">Extrait</div>
            <% } %>
  
            <img src="<%= perfume.image %>" alt="<%= perfume.perfumeName || perfume.name %>">
            <h3><%= perfume.perfumeName || perfume.name %></h3>
            <p>Brand: <%= (perfume.brand && (perfume.brand.brandName || perfume.brand.name)) || perfume.brand || '‚Äî' %></p>
            <p>Target: <%= perfume.targetAudience || perfume.gender || '‚Äî' %></p>
            <p class="perfume-price"><%= perfume.price.toLocaleString() %> VND</p>
            <div class="center-btn">
              <a href="/perfumes/<%= perfume._id %>?from=home" class="btn">View Details</a>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>

  <%- include('partials/footer') %>
</body>
</html>
