<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    body {
      background-color: #0c0c0c;
      color: #fff;
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 95%;
      max-width: 1500px;
      margin-left: 250px;
      margin-top: 120px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: 600;
      letter-spacing: 1px;
    }

    .perfume-list {
      width: 100%;
      margin-top: 30px;
      color: #fff;
      border-collapse: collapse;
    }

    .list-header {
      display: grid;
      grid-template-columns: 120px 1.5fr 2fr 2fr 2fr 2fr 2fr 2fr;
      background: #202020;
      padding: 12px 15px;
      border-bottom: 2px solid #c41e3a;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .perfume-row {
      display: grid;
      grid-template-columns: 120px 1.5fr 2fr 2fr 2fr 2fr 2fr 2fr;
      align-items: center;
      background: #151515;
      border-bottom: 1px solid #333;
      padding: 10px 15px;
      transition: background 0.3s ease;
    }

    .perfume-row:hover {
      background: #1e1e1e;
    }

    .perfume-image img {
      width: 90px;
      height: 90px;
      object-fit: cover;
      border-radius: 10px;
    }

    .perfume-description {
      color: #ccc;
      font-size: 13px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      max-width: 300px;
    }

    .perfume-price {
      color: #c41e3a;
      font-weight: 600;
    }

    .perfume-actions {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
    }

    .btn-icon {
      color: #fff;
      background: #c41e3a;
      padding: 8px 10px;
      border-radius: 6px;
      text-decoration: none;
      transition: 0.3s;
      font-size: 15px;
    }

    .btn-icon:hover {
      background: #a0142e;
    }

    .btn-detail { background: #1a5f7a; }
    .btn-detail:hover { background: #207398; }

    .btn-edit { background: #e67e22; }
    .btn-edit:hover { background: #d35400; }

    .btn-delete { background: #700; }
    .btn-delete:hover { background: #a00; }

    .top-actions {
      text-align: center;
      margin-bottom: 25px;
    }

    .top-actions .btn-add {
      background: #c41e3a;
      padding: 10px 18px;
      color: #fff;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: 0.3s;
    }

    .top-actions .btn-add:hover {
      background: #a0142e;
    }
  </style>
</head>

<body>
    <%- include('../partials/admindashboard') %>

  <div class="container">
    <h1>Manage <span style="color:#c41e3a;">Perfume</span></h1>

    <% if (member && member.role === 'admin') { %>
      <div class="top-actions">
        <a class="btn-add" href="/perfumes/add"><i class="fa-solid fa-plus"></i> Add new Perfume</a>
      </div>
    <% } %>

    <div class="perfume-list">
      <div class="list-header">
        <span>Image</span>
        <span>Name</span>
        <span>Brand</span>
        <span>Concentration</span>
        <span>Volume</span>
        <span>Description</span>
        <span>Price</span>
        <span>Action</span>
      </div>

      <% perfumes.forEach(perfume => { %>
        <div class="perfume-row">
          <div class="perfume-image">
            <img src="<%= perfume.image || '/images/no-image.png' %>" alt="<%= perfume.name %>">
          </div>
          <div><%= (perfume.perfumeName || perfume.name) %></div>
          <div><%= (perfume.brand && (perfume.brand.brandName || perfume.brand.name)) || perfume.brand || '—' %></div>
          <div><%= perfume.concentration || '—' %></div>
          <div><%= perfume.volume ? (perfume.volume + ' ml') : '—' %></div>
          <div class="perfume-description"><%= perfume.description || 'No description' %></div>
          <div class="perfume-price"><%= perfume.price.toLocaleString() %> VND</div>
          <div class="perfume-actions">
            <a href="/perfumes/<%= perfume._id %>" class="btn-icon btn-detail" title="Xem chi tiết">
                <i class="fa-solid fa-eye"></i>
              </a>
            <a href="/perfumes/edit/<%= perfume._id %>" class="btn-icon btn-edit" title="Sửa"><i class="fa-solid fa-pen-to-square"></i></a>
            <a href="/perfumes/delete/<%= perfume._id %>" class="btn-icon btn-delete" title="Xóa"><i class="fa-solid fa-trash"></i></a>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

</body>
</html>
